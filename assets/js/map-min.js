var Map=function(){return{getLatLngMidpoint:function(B,L){var F=function(M){return(M*Math.PI/180)};var C=function(M){return(M*180/Math.PI)};if(B&&L){var K=F(B.lat()),I=F(L.lat()),E=B.lng(),D=F(L.lng()-B.lng());var J=Math.cos(I)*Math.cos(D);var H=Math.cos(I)*Math.sin(D);var G=Math.atan2(Math.sin(K)+Math.sin(I),Math.sqrt((Math.cos(K)+J)*(Math.cos(K)+J)+H*H));var A=F(E)+Math.atan2(H,Math.cos(K)+J);return(G&&A)?new google.maps.LatLng(C(G),C(A)):null}return null},hCardToMarker:function(C){var D=(C instanceof Object)?C:Microformats.hCardToJSON(C);var E=new google.maps.LatLng(D.adr["geo"]["latitude"],D.adr["geo"]["longitude"]);var A=new google.maps.Icon();A.image=D.photo;A.shadow="http://maps.google.com/intl/en_us/mapfiles/ms/micons/pushpin_shadow.png";A.iconSize=new google.maps.Size(32,32);A.shadowSize=new google.maps.Size(59,32);A.iconAnchor=new google.maps.Point(11,32);A.infoWindowAnchor=new google.maps.Point(20,2);A.infoShadowAnchor=new google.maps.Point(22,32);var B=new google.maps.Marker(E,{icon:A,title:D.fn});google.maps.Event.addListener(B,"click",function(){var F=document.getElementById("google-maps-wedding-map");B.openInfoWindowHtml('<div class="maps-bubble">'+D.vCard.innerHTML+'<p><a href="'+F.getAttribute("href")+'">'+F.firstChild.nodeValue+"</a></p></div>")});return B}}}();var onGoogleMapsInitialize=function(){var C=Microformats.hCardToJSON("vcard-ceremony");var A=Microformats.hCardToJSON("vcard-reception");var F=Microformats.hCardToJSON("vcard-accommodations");var D=new google.maps.LatLng(C.adr["geo"]["latitude"],C.adr["geo"]["longitude"]);var B=new google.maps.LatLng(A.adr["geo"]["latitude"],A.adr["geo"]["longitude"]);var E=new google.maps.LatLng(F.adr["geo"]["latitude"],F.adr["geo"]["longitude"]);var H=new google.maps.Map2(document.getElementById("google-maps-events"));H.addControl(new google.maps.SmallMapControl());H.addControl(new google.maps.MapTypeControl());H.setCenter(Map.getLatLngMidpoint(D,B),11);H.addOverlay(Map.hCardToMarker(C));H.addOverlay(Map.hCardToMarker(A));H.addOverlay(Map.hCardToMarker(F));var G=new google.maps.Map2(document.getElementById("google-maps-accommodations"));G.addControl(new google.maps.SmallMapControl());G.addControl(new google.maps.MapTypeControl());G.setCenter(E,11);G.addOverlay(Map.hCardToMarker(C));G.addOverlay(Map.hCardToMarker(A));G.addOverlay(Map.hCardToMarker(F))};google.load("maps","2.x");google.setOnLoadCallback(onGoogleMapsInitialize);